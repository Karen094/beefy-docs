# Как Beefy обеспечивает безопасность ваших средств (SAFU) 

_"Доверяй, но проверяй."_

## Новые платформы доходного фермерства на Beefy

Перед тем как платформа доходного фермерства будет добавлена на Beefy, проект должен пройти ряд тестов на соответствие правилам SAFU. 

* Контракты проверены в обозревателе блокчейна;
* Имеется достаточно ликвидности для обмена токенов, выплачиваемых в качестве поощрения;
* Потенциально опасные функции либо полностью исключены из контракта, либо применяются после задержки (timelock);
* Изменение объемов эмиссии токена доходного фермерства должно осуществляться с задержкой (если токены доходного фермерства используются в стратегии хранилища);
* Все изменения в прокси-контракте должны применятся с задержкой.

## Новые хранилища на Beefy

Наши разработчики стратегии вручную тестируют каждое новое хранилище согласно определенной процедуре, перед тем как запускать его в общий доступ. Это делается для того, чтобы удостоверится в правильной работе хранилища и отсутствии риска для безопасности средств (SAFU) пользователей.

1\. Вносится небольшая сумма средств; \
2\. Средства выводятся из хранилища; \
3\. Средства вносятся снова, затем разработчик стратегии ждет минуту, чтобы удостоверится в том, что доход `callReward()` не равен 0; \
4\. Производится сбор дохода; \
5\. Запускается режим экстренного вывода средств из хранилища; \
6\. Выводится 50% средств, чтобы убедиться в том, что у пользователей тоже будет такая возможность; \
7\. Производится попытка внести средства в хранилище. При этом должно появится сообщение об ошибке, а средства должны остаться на кошельке пользователя; \
8\. Режим экстренного вывода средств из хранилища выключается; \
9\. Вносятся 50% средств, которые были выведены ранее и снова производится сбор дохода.

## Обновления стратегий

Иногда разработчики стратегий Beefy создают новые инновационные стратегии, или платформы доходного фермерства вносят изменения в свои контракты распределения поощрений. В таком случае хранилища Beefy обладают свойством адаптироваться к этим изменениям, то есть стратегии, используемые в них, могут быть заменены таким образом, чтобы у пользователей не возникло потребности вручную выводить средства из старого хранилища в новое: это осуществляется автоматически при обновлении стратегии. 

Новая стратегия запускается в пустом хранилище, после чего проводятся все тесты, упомянутые ранее. После прохождения тестов стратегия закрепляется за действующим хранилищем. Затем хранилище через кошелек с мультиподписью получает предложение об обновлении стратегии, а перед тем, как обновленная стратегия начнет действовать, должно пройти время, указанное в задержке (timelock).

## Экстренный вывод средств

Иногда могут возникнуть проблемы с платформой, используемой хранилищем. В таком случае крайне важно быстро среагировать на ситуацию. У стратегий Beefy есть функция "защитника", которая позволяет запустить функцию экстренного вывода, в результате чего все средства выводятся из проблемной платформы доходного фермерства на контракт хранилища при этом все разрешения, данные этой платформе — отзываются. Таким образом, средства всегда доступны пользователям для вывода, в случае возникновения такой ситуации.